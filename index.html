<!DOCTYPE html>
<html>
    <head>
        <title>LuisFGA</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" media="all" href="css/main.css">
        <link rel="icon" type="image/png" href="images/favicon.ico"/>
    </head>
    
    <body>
        <div id="logo-container">
            <div id="logo">
                <div id="logo-menu-toggle" onclick="toggleMenu()"><img src="images/icons/menu-bars2.png" class="icon menu-toggle"/></div>
                <div id="logo-title">luisfga</div>
            </div>
        </div>
        <div id="menu">
            <div class="menu-item">
                <img src="images/icons/home.png" class="icon selected" onclick="load('home');setSelected(this);"/>
                <div class="hidden-text">Home</div>
            </div>
            <div class="menu-item">
                <img src="images/icons/cv.png" class="icon" onclick="load('cv');setSelected(this);"/>
                <div class="hidden-text">Curr√≠culo</div>
            </div>
            <div class="menu-item">
                <img src="images/icons/java.png" class="icon" onclick="load('java');setSelected(this);"/>
                <div class="hidden-text">Java</div>
            </div>
        </div>
        <div id="content"></div>
    </body>
    <script>
        function load(page){
            var xhr = typeof XMLHttpRequest !== 'undefined' ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
            
            if(page === 'home'){
                xhr.open("get", "pages/home.html", true);
            } else if(page === 'cv'){
                xhr.open("get", "pages/cv.html", true);
            } else if(page === 'java'){
                xhr.open("get", "pages/java.html", true);
            } else {
                return;
            }
            
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    var content = document.getElementById("content");
                    content.innerHTML = xhr.responseText;
                } 
            }
            xhr.send();
        }
        
        function setSelected(newSelectedItem){
            var exSelected = document.getElementsByClassName("selected");
            exSelected[0].classList.remove("selected");
            newSelectedItem.classList.add("selected");
        }

        function toggleMenu() {
            let menu = document.getElementById("menu");
            if (isItemsHidden()){
                itemsFade(getItemsMenu(),"visible");
                
            } else {
                itemsFade(getItemsMenu(),"hidden");
            }
        }

        function isItemsHidden(){
            return getItemsMenu()[0].style.getPropertyValue("visibility")==="hidden";
        }
        
        function getItemsMenu(){
            return document.getElementsByClassName("menu-item");
        }
        
        function itemsFade(items, visibility){
            if (visibility === "hidden"){
                for(let i=0; i<items.length;i++){
                    items[i].style.setProperty("visibility", "hidden");
                    items[i].style.setProperty("opacity", "0");
                }
            } else {
                for(let i=0; i<items.length;i++){
                    items[i].style.setProperty("visibility", "visible");
                    items[i].style.setProperty("opacity", "1");
                }                
            }

        }

        load('home');
    </script>
</html>
